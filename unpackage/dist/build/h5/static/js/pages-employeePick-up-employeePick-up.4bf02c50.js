(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-employeePick-up-employeePick-up"],{"1cbe":function(t,e,i){"use strict";(function(t){var a=i("4a46"),n=i("ee27");i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("57e3")),o=a(i("face")),r=n(i("4f44")),c={onLoad:function(){o.Prompt(),r.default.that=this,this.shop=r.default.shop,uni.getStorage({key:"ClientAddr",success:function(t){r.default.that.client=t.data}})},onReady:function(){if("android"==uni.getSystemInfoSync().platform){var t=location.href,e={PageUrl:t},i=JSON.stringify(e);o.getConfig(r.default.that.client,i)}this.getAllStaff(this.shop),this.checki=0},data:function(){return{client:"",shop:{},sackIndex:"",existType:"",type:"",inUseOrder:[],orIndex:"0",opStaff:[],name:"员工名称",No:"员工编号",pickUpSum:0,staffs:[],check:"",checki:""}},methods:{LoginStatus:function(){""==r.default.that.client&&(r.default.that.$refs.anRef.show("登录失效，请重新登录",{type:"error"}),setTimeout(o.toLogin,1200))},existFruit:function(){var t=this;if(this.$options.methods.LoginStatus(),""!=this.sackIndex){this.inUseOrder=[];var e={boxIndex:this.sackIndex},i=JSON.stringify(e),a="api/Applet.ashx?Function=HttpGetDeviceIDOrderByVirtual";o.multiplexFun(this.client,i,a).then((function(e){if("成功"==e.data.State){var i=new Array;if(i=e.data.Body,0==i.length)t.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"});else{for(var a=0;a<i.length;a++)0==i[a].state&&t.inUseOrder.push(i[a]);0==t.inUseOrder.length&&t.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"})}}}))}else this.$refs.anRef.show("输入袋子编号或扫码",{type:"warn"})},checkAll:function(){if(0!=this.inUseOrder.length){0==this.checki?this.check=!1:this.check=!0;for(var t=0;t<this.inUseOrder.length;t++)if(0==this.inUseOrder[t].checked){this.check=!1;break}for(var e=0;e<this.inUseOrder.length;e++)this.inUseOrder[e].checked=!this.check,this.inUseOrder[e].checked?this.pickUpSum=this.inUseOrder.length:this.pickUpSum=0;this.checki=1}else this.$refs.anRef.show("未查询到订单",{type:"warn"})},selectEmployee:function(t){this.orIndex=t.target.value,this.name=this.staffs[this.orIndex].Name,this.No=this.staffs[this.orIndex].pkNo},sweepCodeh5:function(){s.default.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){t("log","成功"," at pages\\employeePick-up\\employeePick-up.vue:207"),r.default.that.sackIndex=e.resultStr.split("?boxIndex=")[1],r.default.that.existFruit()}})},totalSum:function(){for(var t=this,e=new Array,i=new Array,a=0;a<this.inUseOrder.length;a++)1==this.inUseOrder[a].checked&&(e.push(this.inUseOrder[a].pkNo),i.push(this.inUseOrder[a].boxIndex));if(e.length<1)this.$refs.anRef.show("取件失败，你未选择收取衣物",{type:"warn"});else if("员工编号"!=this.No){var n={fkWorkerNo:this.No,Reserve:e,boxIndex:i};this.$options.methods.LoginStatus();var s=JSON.stringify(n),r="api/Applet.ashx?Function=HttpVirtualReservationReceive";o.multiplexFun(this.client,s,r).then((function(e){"失败"==e.data.State&&"你没有收衣的权限"==e.data.Reason?t.$refs.anRef.show("取件失败，该员工没有收衣权限",{type:"warn"}):"失败"==e.data.State&&"员工确认有误"==e.data.Reason?t.$refs.anRef.show("取件失败，员工确认有误",{type:"warn"}):"成功"==e.data.State&&(t.$refs.anRef.show("取件成功",{type:"success"}),setTimeout(t.existFruit,500))}))}else this.$refs.anRef.show("取件失败，请选择收件员工",{type:"warn"})},changeCheck:function(t){var e=0;t.checked=!t.checked,this.pickUpSum;for(var i=0;i<this.inUseOrder.length;i++)1==this.inUseOrder[i].checked&&(e+=1);this.pickUpSum=e},getAllStaff:function(t){var e,i=this,a={};this.$options.methods.LoginStatus();var n=JSON.stringify(a),s="api/Manager.ashx?Function=HttpQueryAllNormalWorkers";o.multiplexFun(this.client,n,s).then((function(t){if("成功"==t.data.State){i.staffs=t.data.Body;for(var a=0;a<i.staffs.length;a++)e=i.staffs[a].Name+"： "+i.staffs[a].pkNo,i.opStaff.push(e)}}))}}};e.default=c}).call(this,i("0de9")["log"])},"26f4":function(t,e,i){"use strict";var a={"an-layer":i("3401").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"alldata"},[i("an-layer",{ref:"anRef",attrs:{autoClose:!0,timer:"2"}}),i("v-uni-view",{staticClass:"sweep_code"},[i("v-uni-view",{staticClass:"sweep_code_data"},[i("v-uni-input",{attrs:{placeholder:"请输入袋子编号,或扫码"},model:{value:t.sackIndex,callback:function(e){t.sackIndex=e},expression:"sackIndex"}}),i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.existFruit.apply(void 0,arguments)}}},[t._v("确定")]),i("v-uni-text",{staticClass:"iconfont uni-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sweepCodeh5.apply(void 0,arguments)}}},[t._v("")])],1)],1),i("v-uni-view",{staticClass:"orders"},t._l(t.inUseOrder,(function(e,a){return i("v-uni-view",{key:a,staticClass:"info_view"},[i("v-uni-view",{staticClass:"checkbox"},[i("v-uni-checkbox",{attrs:{value:"c",checked:e.checked},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeCheck(e)}}})],1),i("v-uni-view",{staticClass:"sackinfo"},[i("v-uni-view",{staticClass:"uni-bold"},[i("v-uni-text",[t._v(t._s(e.nameBox)+":")]),i("v-uni-text",[t._v(t._s(e.boxIndex))])],1),i("v-uni-view",{},[i("v-uni-text",[t._v("预约单号:")])],1),i("v-uni-view",{},[i("v-uni-text",[t._v(t._s(e.pkNo))])],1)],1),i("v-uni-view",{staticClass:"distime"},[i("v-uni-view",{staticClass:"uni-bold"},[t._v("处理中")]),i("v-uni-view",{},[t._v(t._s(e.createDt))])],1)],1)})),1),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"option"},[i("v-uni-button",{staticClass:"checkall",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkAll.apply(void 0,arguments)}}},[t._v("全选")]),i("v-uni-picker",{staticClass:"select",attrs:{mode:"selector",range:t.opStaff},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.selectEmployee.apply(void 0,arguments)}}},[i("v-uni-view",[i("v-uni-text",[t._v(t._s(t.name))]),i("v-uni-text",[t._v(t._s(t.No))]),i("v-uni-text",{staticClass:"iconfont"},[t._v("")])],1)],1)],1),i("v-uni-button",{staticClass:"confirm uni-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.totalSum.apply(void 0,arguments)}}},[t._v("确定取件（已选"),i("v-uni-text",{domProps:{textContent:t._s(t.pickUpSum)}}),t._v("单）")],1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},"461a":function(t,e,i){"use strict";i.r(e);var a=i("26f4"),n=i("b9bf");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("a586");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"5f5b3a41",null,!1,a["a"],o);e["default"]=c.exports},"566a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-5f5b3a41]{background-color:#d8d8d8}.alldata[data-v-5f5b3a41]{padding-top:%?60?%}.sweep_code[data-v-5f5b3a41]{margin:0 0 %?20?% %?20?%}.sweep_code_data[data-v-5f5b3a41]{position:relative}.sweep_code_data uni-text[data-v-5f5b3a41]{font-size:%?50?%;position:absolute;left:%?415?%;top:%?-3?%}.sweep_code .sweep_code_data uni-input[data-v-5f5b3a41]{width:%?430?%;height:%?80?%;line-height:%?80?%;min-height:%?80?%;border:1px solid;background-color:#fff;display:inline-block;border-radius:%?160?% %?160?% %?160?% %?160?%;padding-left:%?60?%;margin-right:%?15?%}.sweep_code_data .iconfont[data-v-5f5b3a41]{z-index:3}.sweep_code uni-button[data-v-5f5b3a41]{display:inline-block;width:%?200?%;height:%?80?%;line-height:%?80?%;background-color:#007aff;border-radius:%?160?% %?160?% %?160?% %?160?%;color:#fff}.info_view[data-v-5f5b3a41]{border-bottom:2px solid #d8d8d8;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap}.checkbox[data-v-5f5b3a41]{width:%?120?%;height:%?120?%;position:relative}.checkbox uni-checkbox[data-v-5f5b3a41]{position:absolute;top:50%;left:50%;-webkit-transform:scale(.9) translate(-50%,-50%);transform:scale(.9) translate(-50%,-50%)}.sackinfo[data-v-5f5b3a41]{width:54%}.distime[data-v-5f5b3a41]{width:35%;text-align:center}.option[data-v-5f5b3a41]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:rwo nowrap;flex-flow:rwo nowrap}.checkall[data-v-5f5b3a41]{width:40%;height:%?71?%;background-color:#fff;font-size:%?32?%;line-height:%?75?%;margin-right:%?30?%}\n.select[data-v-5f5b3a41]{width:58%;height:35px;background-color:#fff;border:1px solid #d8d8d8;padding:%?10?%;border-radius:%?10?%}\n.select uni-view[data-v-5f5b3a41]{border:1px solid #d8d8d8;border-radius:%?7?%}.select uni-view uni-text[data-v-5f5b3a41]{display:inline-block}.select uni-view uni-text[data-v-5f5b3a41]:first-child{width:45%;text-indent:3px}.select uni-view uni-text[data-v-5f5b3a41]:nth-of-type(2){width:46%;text-indent:1em}.select .iconfont[data-v-5f5b3a41]{font-size:%?22?%}.confirm[data-v-5f5b3a41]{background-color:#0a98d5;color:#fff}.footer[data-v-5f5b3a41]{width:100%;position:absolute;bottom:0}body.?%PAGE?%[data-v-5f5b3a41]{background-color:#d8d8d8}",""]),t.exports=e},a13d:function(t,e,i){var a=i("566a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1c9b1ced",a,!0,{sourceMap:!1,shadowMode:!1})},a586:function(t,e,i){"use strict";var a=i("a13d"),n=i.n(a);n.a},b9bf:function(t,e,i){"use strict";i.r(e);var a=i("1cbe"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);